@using GarsonApp.Frontend.Models;
<!DOCTYPE html>
<!--[if IE 7]><html class="ie ie7"><![endif]-->
<!--[if IE 8]><html class="ie ie8"><![endif]-->
<!--[if IE 9]><html class="ie ie9"><![endif]-->
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="apple-touch-icon.png" rel="apple-touch-icon">
    <link href="favicon.png" rel="icon">
    <meta name="author" content="Nghia Minh Luong">
    <meta name="keywords" content="Default Description">
    <meta name="description" content="Default keyword">
    <title>Sky - Product Listing</title>
    <!-- Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Archivo+Narrow:300,400,700%7CMontserrat:300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="~/Resources/plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/Resources/plugins/ps-icon/style.css">
    <!-- CSS Library-->
    <link rel="stylesheet" href="~/Resources/plugins/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/Resources/plugins/owl-carousel/assets/owl.carousel.css">
    <link rel="stylesheet" href="~/Resources/plugins/jquery-bar-rating/dist/themes/fontawesome-stars.css">
    <link rel="stylesheet" href="~/Resources/plugins/slick/slick/slick.css">
    <link rel="stylesheet" href="~/Resources/plugins/bootstrap-select/dist/css/bootstrap-select.min.css">
    <link rel="stylesheet" href="~/Resources/plugins/Magnific-Popup/dist/magnific-popup.css">
    <link rel="stylesheet" href="~/Resources/plugins/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" href="~/Resources/plugins/revolution/css/settings.css">
    <link rel="stylesheet" href="~/Resources/plugins/revolution/css/layers.css">
    <link rel="stylesheet" href="~/Resources/plugins/revolution/css/navigation.css">
    <!-- Custom-->
    <link rel="stylesheet" href="~/Resources/css/style.css">
    <!--HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries-->
    <!--WARNING: Respond.js doesn't work if you view the page via file://-->
    <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!--[if IE 7]><body class="ie7 lt-ie8 lt-ie9 lt-ie10"><![endif]-->
<!--[if IE 8]><body class="ie8 lt-ie9 lt-ie10"><![endif]-->
<!--[if IE 9]><body class="ie9 lt-ie10"><![endif]-->
<body class="ps-loading">
    <div class="header--sidebar"></div>

    @Html.Partial("~/Views/Partials/Header.cshtml")

    <div class="header-services">
        <div class="ps-services owl-slider" data-owl-auto="true" data-owl-loop="true" data-owl-speed="7000" data-owl-gap="0" data-owl-nav="true" data-owl-dots="false" data-owl-item="1" data-owl-item-xs="1" data-owl-item-sm="1" data-owl-item-md="1" data-owl-item-lg="1" data-owl-duration="1000" data-owl-mousedrag="on">
            <p class="ps-service"><i class="ps-icon-delivery"></i><strong>Free delivery</strong>: Get free standard delivery on every order with Sky Store</p>
            <p class="ps-service"><i class="ps-icon-delivery"></i><strong>Free delivery</strong>: Get free standard delivery on every order with Sky Store</p>
            <p class="ps-service"><i class="ps-icon-delivery"></i><strong>Free delivery</strong>: Get free standard delivery on every order with Sky Store</p>
        </div>
    </div>
    <main class="ps-main">
        <div class="ps-products-wrap pt-80 pb-80">
            <div class="ps-products" data-mh="product-listing">
                <div class="ps-product-action">
                    <div class="ps-product__filter">
                        <select class="ps-select selectpicker">
                            <option value="1">Shortby</option>
                            <option value="2">Name</option>
                            <option value="3">Price (Low to High)</option>
                            <option value="3">Price (High to Low)</option>
                        </select>
                    </div>
                </div>
                <div class="ps-product__columns">

                    @foreach (Restourant item in ViewBag.RestourantList)
                    {
                        <div class="ps-post--2">
                            <div class="ps-post__thumbnail" style="width: 41%;"><a class="ps-post__overlay" href="#"></a><img src="~/Resources/images/blog/4.jpg" alt=""></div>
                            <div class="ps-post__container">
                                <header class="ps-post__header">
                                    <a class="ps-post__title" href="@("http://" + Context.Request.Host.ToString() + "/Product/GetAllProduct?restourantId="+item.Id)">@item.RestourantName</a>
                                </header>
                                <div class="ps-post__content">
                                    <p>@item.RestourantDescription</p>
                                </div>
                                <footer class="ps-post__footer">
                                    <div class="ps-post__actions">
                                        <span><i class="fa fa-comments"></i> Minimum Paket Tutarı : @item.MinOrderPrice</span>
                                        <span><i class="fa fa-heart"></i> Ortalama Getirme Süresi</span>
                                        <div class="ps-post__social">
                                            <i class="fa fa-share-alt"></i><a href="#">Share</a>

                                        </div>
                                    </div>
                                </footer>
                            </div>
                        </div>
                    }

                </div>
                <div class="ps-product-action">
                    <div class="ps-pagination">
                        <ul class="pagination">
                            <li><a href="#"><i class="fa fa-angle-left"></i></a></li>
                            <li class="active"><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">...</a></li>
                            <li><a href="#"><i class="fa fa-angle-right"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="ps-sidebar" data-mh="product-listing">
                <aside class="ps-widget--sidebar ps-widget--category">
                    <div class="ps-widget__header">
                        <h3>Fiyat Aralığı</h3>
                    </div>
                    <div class="ps-widget__content">
                        <ul class="ps-list--checked">
                            <li class="@ViewBag.ActiveOrderTableClass"><a href="@ViewBag.ActiveOrderTableUrl">Masaya Servis</a></li>
                            <li class="@ViewBag.ActiveOrderHomeClass"><a href="@ViewBag.ActiveOrderHomeUrl">Eve Servis</a></li>
                            <li class="@ViewBag.ActiveAllOrderClass"><a href="@ViewBag.ActiveAllOrderUrl">Tümü</a></li>
                        </ul>
                    </div>
                </aside>

                <aside class="ps-widget--sidebar ps-widget--filter">
                    <div class="ps-widget__header">
                        <h3>Minimum Paket Tutarı</h3>
                    </div>
                    <div class="ps-widget__content">
                        <div class="ac-slider" data-default-min="0" data-default-max="@ViewBag.minPrice" data-max="200" data-step="5" data-unit="TL"></div>
                        <p class="ac-slider__meta">Aralık:<span class="ac-slider__value ac-slider__min"></span>-<span class="ac-slider__value ac-slider__max"></span></p><a class="ac-slider__filter ps-btn" id="btnFilter" href="#">Filtrele</a>
                    </div>
                </aside>
            </div>
        </div>
        <div class="ps-subscribe">
            <div class="ps-container">
                <div class="row">
                    <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12 ">
                        <h3><i class="fa fa-envelope"></i>Sign up to Newsletter</h3>
                    </div>
                    <div class="col-lg-5 col-md-7 col-sm-12 col-xs-12 ">
                        <form class="ps-subscribe__form" action="do_action" method="post">
                            <input class="form-control" type="text" placeholder="">
                            <button>Sign up now</button>
                        </form>
                    </div>
                    <div class="col-lg-4 col-md-5 col-sm-12 col-xs-12 ">
                        <p>...and receive  <span>$20</span>  coupon for first shopping.</p>
                    </div>
                </div>
            </div>
        </div>

        @Html.Partial("~/Views/Partials/Footer.cshtml")
    </main>
    <!-- JS Library-->
    <script type="text/javascript" src="~/Resources/plugins/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/jquery-bar-rating/dist/jquery.barrating.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/owl-carousel/owl.carousel.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/gmap3.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/imagesloaded.pkgd.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/isotope.pkgd.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/jquery.matchHeight-min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/slick/slick/slick.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/elevatezoom/jquery.elevatezoom.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/Magnific-Popup/dist/jquery.magnific-popup.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript"
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAx39JFH5nhxze1ZydH-Kl8xXM3OK4fvcg&amp;region=GB"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/jquery.themepunch.tools.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/jquery.themepunch.revolution.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/extensions/revolution.extension.video.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script type="text/javascript"
            src="~/Resources/plugins/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/extensions/revolution.extension.parallax.min.js"></script>
    <script type="text/javascript" src="~/Resources/plugins/revolution/js/extensions/revolution.extension.actions.min.js"></script>
    <!-- Custom scripts-->
    <script type="text/javascript" src="~/Resources/js/main.js"></script>


    <script>
        function removeParam(key, sourceURL) {
            var rtn = sourceURL.split("?")[0],
                param,
                params_arr = [],
                queryString = (sourceURL.indexOf("?") !== -1) ? sourceURL.split("?")[1] : "";
            if (queryString !== "") {
                params_arr = queryString.split("&");
                for (var i = params_arr.length - 1; i >= 0; i -= 1) {
                    param = params_arr[i].split("=")[0];
                    if (param === key) {
                        params_arr.splice(i, 1);
                    }
                }
                if (params_arr.length) rtn = rtn + "?" + params_arr.join("&");
            }
            return rtn;
        }

        function getElementByXpath(path) {
            return document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
        }

        $(document).ready(function () {
            $(getElementByXpath("/html/body/main/div[1]/div[2]/aside[2]/div[2]/div/span[1]")).css("display", "none");
        });

        $("#btnFilter").click(function () {
            var removedUrl = removeParam("minPrice", window.location.href);
            if (removedUrl.indexOf("?") == -1) removedUrl += "?";
            window.location.href = removedUrl + "&minPrice=" + $(".ac-slider__max").text().replace("$", "");
        });
    </script>
</body>
</html>